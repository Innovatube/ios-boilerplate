# Salon
## Features

- Home
- Booking
- Customer
- Message
- Mypage
- Notification
- Drawer & Passcode Lock
- QR
- Login
- Post Articles

## Architecture
![clean architecture](https://github.com/istyle-inc/salon_app_ios/blob/develop/cleanArchitecture.png)

## Directory description

|  Folder | Description |
|  ------ | ------ |
|  Domain | domain layer files (includes Entities, UseCases interfaces) |
|  DomainTests | Unit Tests for Domain layer |
|  KeychainPlatform | KeyChain Platform layer files (includes UseCases, Repositories, Keychain access) |
|  KeychainPlatformTests | Unit Tests for KeychainPlatform layer |
|  NetworkPlatform | Network platform layer files (includes UseCases, Repositories, API implementations) |
|  NetworkPlatformTests | Unit Tests for NetworkPlatform layer |
|  Podfile | describe all 3rd party libraries that we use |
|  Podfile.lock | exact version and hash number for each 3rd party libs that we use currently |
|  Pods | all 3rd party library files that we use |
|  R.generated.swift | [R.swift](https://github.com/mac-cain13/R.swift) file automatically generated by build phase script |
|  README.md | this readme document |
|  Salon | application layer source files |
|  ├── Application | holds `AppDelegate`, `Salon-Bridging-Header.h` and `Info.plist` |
|  ├── Configurations | holds configuration file like enum, struct |
|  ├── Custom Views | holds custum views |
|  ├── Extensions | holds extention for each classes |
|  ├── Model | holds some view specific model interfaces and implementations |
|  ├── Resources | holds Strings, Storyboards(for **view controller**), Fonts, Assets |
|  ├── Salon.entitlements | entitlements |
|  ├── Scenes | holds ViewModels, ViewControllers, Views(including view specific Storyboards) |
|  └── Utility | holds some uncategorized utility files |
|  Salon.xcodeproj | project file for the app |
|  Salon.xcworkspace | work space file for the app |
|  SalonTests | Unit Tests for the app |
|  SalonUITests | UITests for the app |
|  appcenter-pre-build.sh | shell file for [appcenter](https://appcenter.ms/) to be able to build |

## Prerequisites

- Xcode `9.4.1 or upper`
- Deployment target `9.0`
- Bundle Id `jp.co.istyle.Salon`
- Team `istyle, Inc.`
- Provisioning Profile `Xcode managed Profile`
- Schemes

|  Scheme | setting | value |
|  ------ | ------ | ------ |
|  Salon | Build Configuration | Debug |
|   | Environment Variables | BUILD_TYPE=DEBUG |
|  SalonStaging | Build Configuration | Staging |
|   | Environment Variables | BUILD_TYPE=STAGING |

- [Accessible API for each environment](https://github.com/istyle-inc/salon_app_ios/blob/2dcb616ca64896849671c6cdf8f1330fc9d9fe83/Salon/Configurations/Configuration.swift#L45)

- [Login Accounts](https://docs.google.com/spreadsheets/d/1bi-D9PPHda1GK7MMWl-y3VQ_4nwykyKKUM3ZBDmmY3s/edit#gid=0)

- **API that is used on `Salon` scheme is IP restricted. Please be careful**


## Installation

1. get access permission to this repo
2. `git clone git@github.com:istyle-inc/salon_app_ios.git`
3. open `Salon.xcworkspace` 
4. set scheme as you want (`Salon` is default)
5. select device you want to run
6. press run (cmd + r)

- Pods are alredy included in this repo, you don't need to `pod install` basically. But, if something wrong about pods, please try `Pod install`.
- To launch on an actual device, you need to register your device to linked apple development account, which can be managed by Xcode automatically.

- You can install an app via deploygate as below:
- [development build](https://deploygate.com/users/i-sys-mt/platforms/ios/apps/jp.co.istyle.Salon.inhouse.development)(scheme: Salon)
- [staging build](https://deploygate.com/users/i-sys-mt/platforms/ios/apps/jp.co.istyle.Salon.inhouse.staging)(scheme: SalonStaging)

## CI that we use

We use [appcenter](https://appcenter.ms/users/EugeneNguyen/apps/iStyle-ios/build/branches/develop). 

- The repository is linked to github `develop` branch
- When any Pull requests are merged into `develop` branch, app center automatically build the app
- This CI is designed for innovatube inhouse where we are using innovatube apple developer account
- The CI is using [pre-build script](https://github.com/istyle-inc/salon_app_ios/blob/develop/appcenter-pre-build.sh), where we change `CFBundleName` and `CFBundleIdentifier ` so that we can use our own certificate and provisioning profile. 
- you can refer [ms doc](https://docs.microsoft.com/en-us/appcenter/build/custom/scripts/#pre-build) about the script
- Mr. Suzuki has access to the [management board](https://appcenter.ms/users/EugeneNguyen/apps/iStyle-ios/build/branches/develop)

## How to run test

1. Check target that you want to test via scheme setting
2. Run test (command + u)
<insert image>

## Code Style

we are using [swift lint](https://github.com/istyle-inc/salon_app_ios/blob/develop/.swiftlint.yml). 

[More detail about our lint rules](https://github.com/Innovatube/swift-style-guide).

## Development Base Policy

we are following [this policy](https://github.com/istyle-inc/salon_app_ios/wiki/Development-Base-Policy).

## 3rd party libraries

we use [CocoaPod](https://cocoapods.org/) to use 3rd party libraries.

All libraries list are shown on [Pods file](https://github.com/istyle-inc/salon_app_ios/blob/develop/Podfile).

we can use library like [this](https://github.com/mono0926/LicensePlist), in the future to meet all license condition.

## Misc 

- [API implementation progress sheet](https://docs.google.com/spreadsheets/d/15Km6zYlKwH_tXht3JgLBeqKUF3e9Igvp2t27D0ti3_8/edit#gid=1949008269)
- [APIs QA List](https://docs.google.com/spreadsheets/d/1gKUT0w23JsxqeOShmRhWwebvYsrHlJOid3mqa1dfv1I/edit#gid=1623704251)

(add anything that you think it's needed!)
